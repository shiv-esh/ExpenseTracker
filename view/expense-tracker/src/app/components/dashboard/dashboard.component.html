<div class="dashboard-wrapper">
    <nav class="navbar">
        <div class="logo">Expense<span>Tracker</span></div>
        <div class="user-info">
            <span>Howdy, {{ user?.username }}</span>
            <button class="btn-logout" (click)="logout()">Logout</button>
        </div>
    </nav>

    <main class="content">
        <div class="dashboard-grid">
            <!-- Add Expense Form -->
            <section class="glass-card add-expense">
                <h3>Add Daily Expense</h3>
                <form (ngSubmit)="addExpense()" #expenseForm="ngForm">
                    <div class="form-row">
                        <div class="form-group">
                            <label>Amount (₹)</label>
                            <input type="number" name="amount" [(ngModel)]="newExpense.amount" required
                                placeholder="0.00">
                        </div>
                        <div class="form-group">
                            <label>Category</label>
                            <select name="category" [(ngModel)]="newExpense.category" required>
                                <option [ngValue]="null" disabled>Select Category</option>
                                <option *ngFor="let cat of categories" [ngValue]="cat">{{ cat.name }}</option>
                            </select>
                        </div>
                    </div>

                    <div class="form-group">
                        <label>Description (Optional)</label>
                        <textarea name="description" [(ngModel)]="newExpense.description"
                            placeholder="What was this for?"></textarea>
                    </div>

                    <div class="form-group">
                        <label>Date</label>
                        <input type="date" name="date" [(ngModel)]="newExpense.date" required>
                    </div>

                    <button type="submit" class="btn-primary" [disabled]="!expenseForm.form.valid">Add Expense</button>
                </form>
            </section>

            <!-- Expense List -->
            <section class="glass-card expense-list">
                <h3>Your Expenses</h3>
                <div class="scroll-area">
                    <div class="empty-state" *ngIf="expenses.length === 0">
                        <p>No expenses found. Start adding some!</p>
                    </div>
                    <table *ngIf="expenses.length > 0">
                        <thead>
                            <tr>
                                <th>Date</th>
                                <th>Category</th>
                                <th>Description</th>
                                <th>Amount</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr *ngFor="let exp of expenses">
                                <td>{{ exp.date }}</td>
                                <td><span class="badge">{{ exp.category?.name }}</span></td>
                                <td>{{ exp.description || '-' }}</td>
                                <td class="amount">₹{{ exp.amount | number:'1.2-2' }}</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </section>
        </div>
    </main>
</div>